#!/bin/sh

trash_dir="${samp_shell_trash_dir:-"$HOME/.Trash/.samp-shell-trash"}"

if [ "$1" = -- ]; then
	shift
elif [ "$1" = -h ] || [ "$1" = --help ]; then
	eecho "usage: $0 ... files"
	eecho "  Moves files to the trash, possibly renaming them. The trash dir is"
	eecho "  controlled by the variable 'samp_shell_trash_dir', or defaults"
	eecho "  to $(printf %q "$trash_dir")"
	exit -1
fi

if [ ! -d "$trash_dir" ]; then
	if [ -e "$trash_dir" ]; then
		warn "$0: Trash directory $(printf %q "$trash_dir") exists but is a not a directory"
		exit 1
	fi

	mkdir -p "$trash_dir" || exit $?
fi

mv-safe -- "$@" "$trash_dir"
